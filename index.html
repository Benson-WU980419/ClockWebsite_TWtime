<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>網頁時鐘</title>
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Major+Mono+Display&display=swap" rel="stylesheet">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="iPhone 時鐘">
    <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/Benson-WU980419/ClockWebsite_TWtime/refs/heads/main/iPhoneClock_04_19.png">
    <link rel="icon" href="https://raw.githubusercontent.com/Benson-WU980419/ClockWebsite_TWtime/refs/heads/main/iPhoneClock_04_19.png" type="image/png">

    <style>
        /* 整體頁面樣式 */
        body {
            background-color: #000; /* 純黑色背景，適合深色模式 */
            color: #FFF; /* 白色文字 (主要用於校正訊息，時間顏色會被覆蓋) */
            font-family: 'Lobster', cursive; /* 頁面主要字體仍使用 Lobster，營造整體風格 */
            font-weight: normal; /* Lobster 字體本身就較粗，不需要額外設定 bold */
            display: flex; /* 使用 Flexbox 讓內容居中 */
            flex-direction: column; /* 垂直排列時間和訊息 */
            justify-content: center; /* 垂直居中 */
            align-items: center; /* 水平居中 */
            height: 100vh; /* 佔滿整個視口高度 */
            margin: 0; /* 移除預設外邊距 */
            overflow: hidden; /* 防止頁面出現滾動條 */
            user-select: none; /* 防止使用者選取文字，提升作為時鐘的體驗 */
            -webkit-user-select: none; /* 針對 Safari 瀏覽器 */
            -moz-user-select: none; /* 針對 Firefox 瀏覽器 */
            -ms-user-select: none; /* 針對 IE/Edge 瀏覽器 */
            /* 針對 iOS 設備的安全區域，確保內容不會被瀏海或底部條遮擋 */
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }

        /* 時間顯示區塊樣式 */
        #time {
            /* 調整字體大小，確保不超出螢幕且不換行 */
            font-size: 15vw; /* 略微縮小字體，以適應輝光管風格和確保不換行 */
            text-align: center; /* 文字居中 */
            /* 調整字體間距以適應 Major Mono Display 的風格，通常等寬字體間距較小 */
            letter-spacing: -0.05em; /* 負值間距讓字元更緊湊，適合 Major Mono Display */
            
            /* 輝光管風格顏色和發光效果 */
            color: #FF8C00; /* 輝光管的橙紅色 */
            text-shadow: 
                0 0 5px rgba(255, 140, 0, 0.8),   /* 較近的柔和光暈 */
                0 0 15px rgba(255, 140, 0, 0.6),  /* 中等範圍的光暈 */
                0 0 30px rgba(255, 140, 0, 0.4);  /* 較遠的擴散光暈 */
            
            position: relative; /* 允許使用 transform 進行定位偏移 */
            transition: transform 5s ease-in-out; /* 設置平滑的過渡效果，讓移動不那麼突兀 */
            line-height: 1; /* 確保行高緊湊，避免多餘的垂直空間 */
            /* 使用 Major Mono Display 作為時間數字字體，並提供通用等寬字體作為備用 */
            font-family: 'Major Mono Display', monospace; 
            white-space: nowrap; /* 防止時間顯示換行 */
        }

        /* 校正訊息區塊樣式 */
        #calibration-message {
            font-size: 3.5vw; /* 稍微增大校正訊息字體 */
            color: rgba(255, 255, 255, 0.6); /* 稍微淡一點的白色，與時間區分開 */
            margin-top: 3vh; /* 增加與時間顯示的間距 */
            text-align: center;
            /* 校正訊息字體保持微軟正黑 */
            font-family: 'Microsoft JhengHei', '微軟正黑體', sans-serif;
            font-weight: normal;
        }
    </style>
</head>
<body>
    <div id="time"></div>
    <div id="calibration-message"></div>

    <script>
        /**
         * @function updateTime
         * @description 更新時間顯示，每秒執行一次。
         */
        function updateTime() {
            const now = new Date();
            let hours = now.getHours();
            let minutes = now.getMinutes();
            let seconds = now.getSeconds();

            // 格式化時間，確保小時、分鐘、秒數都以兩位數顯示 (例如 01:05:09)
            hours = hours < 10 ? '0' + hours : hours;
            minutes = minutes < 10 ? '0' + minutes : minutes;
            seconds = seconds < 10 ? '0' + seconds : seconds;

            // 將格式化後的時間顯示在頁面上，使用全形冒號
            document.getElementById('time').textContent = `${hours}：${minutes}：${seconds}`;
        }

        /**
         * @function applyScreenProtection
         * @description 輕微移動時間顯示的位置，以防止螢幕燒屏。
         * 此函數僅針對 #time 元素應用 transform 屬性，校正訊息 (#calibration-message) 不會移動。
         * 使用 CSS transform 屬性進行位移，並結合 transition 實現平滑移動。
         */
        function applyScreenProtection() {
            const timeElement = document.getElementById('time');
            // 生成一個小範圍的隨機偏移量，例如在 -1.5vw 到 +1.5vw 之間
            // vw (viewport width) 和 vh (viewport height) 確保移動量與螢幕大小成比例
            const offsetX = (Math.random() * 2 - 1) * 1.5; // 隨機生成 -1.5 到 +1.5 之間的 vw 偏移量
            const offsetY = (Math.random() * 2 - 1) * 1.5; // 隨機生成 -1.5 到 +1.5 之間的 vh 偏移量

            // 將計算出的偏移量應用到時間元素的 transform 屬性上
            timeElement.style.transform = `translate(${offsetX}vw, ${offsetY}vh)`;
        }

        /**
         * @function startCalibration
         * @description 啟動校正過程，顯示校正訊息。
         */
        function startCalibration() {
            const calibrationMessageElement = document.getElementById('calibration-message');

            // 顯示校正中訊息
            calibrationMessageElement.textContent = '校正中...';

            // 模擬校正延遲
            setTimeout(() => {
                // 校正完成後顯示訊息
                calibrationMessageElement.textContent = '校正完成';

                // 在一段時間後清除訊息
                setTimeout(() => {
                    calibrationMessageElement.textContent = '';
                }, 2000); // 訊息顯示 2 秒後清除
            }, 1500); // 模擬校正過程 1.5 秒
        }

        // 設定定時器：每秒更新一次時間
        setInterval(updateTime, 1000);

        // 設定定時器：每 10 秒移動一次時間顯示，啟動螢幕保護功能
        setInterval(applyScreenProtection, 10000); // 10000 毫秒 = 10 秒

        // 設定定時器：每 60 秒啟動一次校正
        setInterval(startCalibration, 60000); // 60000 毫秒 = 60 秒

        // 頁面載入時，立即更新一次時間、應用一次螢幕保護，並在首次校正前清空訊息
        updateTime();
        applyScreenProtection();
        document.getElementById('calibration-message').textContent = ''; // 確保初始是空的
    </script>
</body>
</html>
